{"version":3,"file":"component---src-pages-share-js-9dcbf0d046a66abb65a9.js","mappings":"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","sources":["webpack://nwa-daily/./src/pages/share.js"],"sourcesContent":["import React from \"react\";\nimport { Link, graphql, useStaticQuery, StaticQuery } from \"gatsby\";\nimport Layout from \"../components/layout\";\nimport { withBreakpoints } from 'gatsby-plugin-breakpoints';\nimport \"../assets/css/main.css\";\n\nclass SharePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.emailRef = React.createRef();\n    this.state = {\n      sharerId: \"\",\n      sharee: \"\",\n      source: \"\",\n      isSubmitted: false,\n      date: new Date()\n    }\n  }\n  handleInputChange = event => {\n    console.log('test')\n    const target = event.target\n    const value = target.value\n    const name = target.name\n    console.log(name)\n    this.setState({\n      [name]: value,\n    })\n    console.log(this.state.email)\n  }\n\n  submitHandler = (e) => {\n    e.preventDefault();\n    \n    let postId = null\n    console.log(window.location.href.split('?id=').length)\n    if (window.location.href.split('?id=').length > 1) {\n    console.log('idhere')\n    console.log(window.location.href)\n    postId = window.location.href.split('?id=')[1]\n    postId = postId.split('&')[0]\n    console.log(postId)\n    }\n  else {\n      postId = 'regular'\n      console.log(postId)\n    }\n    if (this.state.sharee !== \"\") {\n    \n    const sharee = this.state.sharee\n    const requestBody = {\n        sharer: postId,\n        sharee: sharee,\n        source: 'share',\n        shareDate: this.state.date,\n        property: \"NWA Daily\"\n      }\n  \n    fetch(`https://nwadailybackend.herokuapp.com/shares`, {\n      method: 'POST',\n      body: JSON.stringify(requestBody),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData.data)\n        this.setState({\n          isSubmitted: true\n        })\n        \n      })\n      .catch(err => {\n        console.log(err);\n      });\n      fetch(`https://nwadailybackend.herokuapp.com/refer`, {\n        method: 'POST',\n        body: JSON.stringify({\n          // sharer: sharer,\n          sharee: sharee,\n          sharerId: postId\n                              }),\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        mode: 'cors'\n      })\n        .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            console.log(res.status)\n            return res.status\n          }\n          return res;\n        })\n        .catch(err => {\n          console.log(err);\n        });\n  }\n  else {\n    console.log('err')\n  }\n  \n  }\n\n  render() {\n  const { breakpoints } = this.props;\n  return (\n    <StaticQuery\n    query={graphql`\n    query {\n      strapiHomepage {\n        hero {\n          title\n        }\n        seo {\n          metaTitle\n          metaDescription\n          shareImage {\n            publicURL\n          }\n        }\n      }\n    }\n    `}\n    render={data => (\n    <Layout seo={data.strapiHomepage.seo}>\n{breakpoints.sm ? \n(\n<div className=\"uk-section\">\n      {/* <h1 className=\"uk-text-center\">{data.strapiHomepage.hero.title}</h1> */}\n      <h3 className=\"uk-text-center\">Be a good friend, keep them in the know!</h3>\n      <div style={{textAlign:\"center\"}}>\n      <form class=\"uk-form\" style={{marginLeft:\"auto\",marginRight:\"auto\",width:\"90%\"}}>\n            \n            <div class=\"test\">\n                  \n            {this.state.isSubmitted === false ?\n              (\n                <div class=\"uk-margin\">\n          <input style={{width:\"90%\",color:\"#307765\", marginBottom:\"0px\",paddingBottom:\"0px\"}} \n            className=\"uk-input\" \n            id=\"signup\"\n            name=\"sharee\" \n            type=\"text\" \n            placeholder=\"Your friend's email address\"\n            labelText=\"Your Email\"\n            value={this.state.sharee}\n              onChange={(e) => {\n                console.log(e.target.value)\n                this.setState({sharee:e.target.value})\n            }}\n            />\n          <button \n            style={{backgroundColor:\"#307765\",opacity:1,color:\"white\"}} \n            className=\"uk-button uk-button-default\"\n            onClick={this.submitHandler}\n            >Share</button>\n            </div>\n              )\n              :\n              (\n                <div class=\"uk-margin\">\n          <h4 style={{textAlign:\"center\"}}>Thanks for sharing!</h4>\n            </div>\n              )}\n              </div>\n          \n        </form>\n        {/* <img src=\"https://nwa-daily-photos.s3.amazonaws.com/output_JBQF_2y_b550d1e6a2.gif\"></img> */}\n        </div>\n      {/* <p className=\"uk-text-center\" style={{marginLeft:\"auto\",marginRight:\"auto\",width:\"60%\"}}>We deliver a succinct newsletter on a daily basis to keep you up to date on what's happening in NWA. These emails are sent directly to your inbox every weekday morning, so you can easily and quickly get the information you need about your hometown.</p> */}\n      \n        \n        </div>\n)\n:\n(\n<div className=\"uk-section\">\n      {/* <h1 className=\"uk-text-center\">{data.strapiHomepage.hero.title}</h1> */}\n      <h3 className=\"uk-text-center\">Be a good friend, keep them in the know!</h3>\n      <div style={{textAlign:\"center\"}}>\n      <form class=\"uk-form\" style={{marginLeft:\"auto\",marginRight:\"auto\",width:\"50%\"}}>\n            \n            <div class=\"test\">\n                  \n            {this.state.isSubmitted === false ?\n              (\n                <div class=\"uk-margin\">\n          <input style={{width:\"70%\",color:\"#307765\", marginBottom:\"0px\",paddingBottom:\"0px\"}} \n            className=\"uk-input\" \n            id=\"signup\"\n            name=\"sharee\" \n            type=\"text\" \n            placeholder=\"Your friend's email address\"\n            labelText=\"Your Email\"\n            value={this.state.sharee}\n              onChange={(e) => {\n                console.log(e.target.value)\n                this.setState({sharee:e.target.value})\n            }}\n            />\n          <button \n            style={{backgroundColor:\"#307765\",opacity:1,color:\"white\"}} \n            className=\"uk-button uk-button-default\"\n            onClick={this.submitHandler}\n            >Share</button>\n            </div>\n              )\n              :\n              (\n                <div class=\"uk-margin\">\n          <h4 style={{textAlign:\"center\"}}>Thanks for sharing!</h4>\n            </div>\n              )}\n              </div>\n          \n        </form>\n        {/* <img src=\"https://nwa-daily-photos.s3.amazonaws.com/output_JBQF_2y_88cfe6719f.gif\"></img> */}\n        </div>\n      {/* <p className=\"uk-text-center\" style={{marginLeft:\"auto\",marginRight:\"auto\",width:\"60%\"}}>We deliver a succinct newsletter on a daily basis to keep you up to date on what's happening in NWA. These emails are sent directly to your inbox every weekday morning, so you can easily and quickly get the information you need about your hometown.</p> */}\n      \n        \n        </div>\n)}\n      \n    </Layout>\n    )}\n    />     \n  );\n}\n}\n\n\nexport default withBreakpoints(SharePage);"],"names":["SharePage","_React$Component","props","_this","call","handleInputChange","event","console","log","target","value","name","setState","state","email","submitHandler","e","preventDefault","postId","window","location","href","split","length","sharee","requestBody","sharer","source","shareDate","date","property","fetch","method","body","JSON","stringify","headers","then","res","status","Error","json","resData","data","isSubmitted","catch","err","sharerId","mode","emailRef","React","Date","_inheritsLoose","prototype","render","breakpoints","this","StaticQuery","query","Layout","seo","strapiHomepage","sm","className","style","textAlign","class","marginLeft","marginRight","width","color","marginBottom","paddingBottom","id","type","placeholder","labelText","onChange","backgroundColor","opacity","onClick","withBreakpoints"],"sourceRoot":""}